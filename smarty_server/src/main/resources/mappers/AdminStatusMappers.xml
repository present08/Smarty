<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.smarty.mapper.AdminStatusMapper">

    <select id="getReservation">
        select * from reservation where court_id=#{court_id}
    </select>
    <select id="getEnrollment">
        select * from enrollment where class_id=#{class_id}
    </select>
    <select id="getResAttendance">
        select * from attendance where reservation_id=#{reservation_id}
    </select>
    <select id="getEnrAttendance">
        select * from attendance where enrollment_id=#{enrollment_id}
    </select>
    <select id="getPermission" resultType = "com.green.smarty.dto.PermissionDTO">
        select e.enrollment_id, u.user_id, u.user_name, c.class_name, c.start_date, c.end_date, p.amount, e.enrollment_status from enrollment e join class c on e.class_id = c.class_id join user u on u.user_id = e.user_id join payment p on p.enrollment_id = e.enrollment_id where e.enrollment_status = '승인대기'
    </select>
    <update id = "enrollment_update" parameterType="string">
        update enrollment set enrollment_status = '승인완료' where enrollment_id = #{enrollment_id}
    </update>
</mapper>